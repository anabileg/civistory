<!DOCTYPE html>
<html id="htmlTag" lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CiviStories</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700;900&family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* سأضع هنا كل التصميمات الرائعة التي كانت في ملفك الأصلي مع تحسينها لتناسب النظام الجديد */
        :root {
            --gold: #d4af37; --white: #ffffff; --red-news: #b30000; --red-num: #ff0000;
            --yt: #FF0000; --fb: #1877F2; --tw: #ffffff; --ig: #E4405F; --wa-color: #25D366; --cream-bg: #fdf9f3;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { color: var(--white); font-family: 'Tajawal', sans-serif; background: #000; overflow-x: hidden; font-weight: bold; }
        
        /* الخلفية المتحركة */
        .site-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('assets/image_390e08.jpg'); background-position: center; background-size: cover; z-index: -1;
            animation: kenBurns 35s ease-in-out infinite alternate;
        }
        @keyframes kenBurns { 0% { transform: scale(1); filter: brightness(0.35);} 100% { transform: scale(1.18); filter: brightness(0.55);} }

        /* الهيدر */
        .navbar {
            min-height: 90px; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px);
            position: fixed; top: 0; width: 100%; z-index: 10001; border-bottom: 2px solid var(--gold);
            display: flex; align-items: center; justify-content: center;
        }
        .nav-container { width: 95%; max-width: 1400px; display: flex; justify-content: space-between; align-items: center; }
        .nav-links { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; }
        .nav-links a { color: var(--gold); text-decoration: none; font-size: 0.9rem; transition: 0.3s; cursor: pointer; }
        .nav-links a:hover { color: #fff; }
        .nav-logo-img { height: 60px; }

        /* شريط الأخبار */
        .news-ticker { background: var(--red-news); color: white; height: 45px; position: fixed; top: 90px; width: 100%; z-index: 1000; display: flex; align-items: center; overflow: hidden; }
        .ticker-track { display: flex; white-space: nowrap; width: max-content; animation: marqueeNews 1200s linear infinite; }
        .ticker-track span { padding: 0 50px; font-weight: bold; font-size: 1.1rem; }
        @keyframes marqueeNews { 0% { transform: translateX(0); } 100% { transform: translateX(50%); } }

        /* البطاقة الرئيسية */
        .hero { padding: 180px 5% 60px; display: flex; flex-direction: column; align-items: center; }
        .mission-statement { text-align: center; margin-bottom: 40px; font-size: 2.2rem; color: var(--gold); max-width: 1000px; line-height: 1.5; }
        .hero-container { display: flex; gap: 30px; width: 100%; justify-content: center; flex-wrap: wrap; }
        .video-box { flex: 1; max-width: 800px; height: 450px; border: 2px solid var(--gold); border-radius: 20px; overflow: hidden; }
        .book-box { width: 300px; text-align: center; }
        .book-box img { width: 100%; border: 2px solid var(--gold); border-radius: 15px; animation: float 3s infinite ease-in-out; }
        @keyframes float { 0%,100% {transform: translateY(0);} 50% {transform: translateY(-10px);} }

        /* أزرار ونوافذ */
        .btn-action { background: var(--gold); color: #000; padding: 12px; display: block; margin-top: 15px; border-radius: 8px; text-decoration: none; font-weight: 900; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; z-index: 20000; align-items: center; justify-content: center; }
        .modal-content { background: var(--cream-bg); color: #000; padding: 30px; border-radius: 20px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto; position: relative; }
        .close-btn { position: absolute; top: 10px; left: 10px; background: #000; color: #fff; width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }

        /* تنسيق الأعلام */
        .lang-btn { cursor: pointer; border: 1px solid var(--gold); border-radius: 4px; width: 45px; }
        .lang-dropdown { position: absolute; top: 60px; right: 0; background: #000; border: 1px solid var(--gold); display: none; max-height: 300px; overflow-y: auto; z-index: 10002; }
        .lang-item { padding: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; color: var(--gold); border-bottom: 1px solid #333; }

        @media (max-width: 768px) {
            .navbar { min-height: 140px; }
            .news-ticker { top: 140px; }
            .hero { padding-top: 220px; }
            .mission-statement { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

<div class="site-bg"></div>

<nav class="navbar">
    <div class="nav-container">
        <div style="position:relative">
            <img src="https://flagcdn.com/w80/eg.png" id="currentFlag" class="lang-btn" onclick="document.getElementById('langMenu').style.display='block'">
            <div id="langMenu" class="lang-dropdown"></div>
        </div>
        <div class="nav-links" id="navLinks">
            </div>
        <img src="assets/logo.png" class="nav-logo-img">
    </div>
</nav>

<div class="news-ticker">
    <div class="ticker-track" id="tickerTrack"></div>
</div>

<section class="hero">
    <div class="mission-statement" id="mainTitle"></div>
    <div class="hero-container">
        <div class="book-box">
            <img src="assets/CIVISTORIES Book.png">
            <a id="bookBtn" href="#" target="_blank" class="btn-action"></a>
        </div>
        <div class="video-box">
            <iframe id="mainVideo" width="100%" height="100%" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
    </div>
</section>

<div id="contentModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="this.parentElement.parentElement.style.display='none'">×</span>
        <div id="modalBody"></div>
    </div>
</div>

<script>
    const languages = [
        { id: 'ar', name: 'عربي', flag: 'eg' },
        { id: 'en', name: 'English', flag: 'gb' },
        { id: 'fr', name: 'Français', flag: 'fr' }
        // أضف البقية هنا لاحقاً بنفس النمط
    ];

    // وظيفة تحميل ملف اللغة برمجياً
    function loadLanguage(langId) {
        const script = document.createElement('script');
        script.src = `langs/${langId}.js`; // سيبحث عن الملف في مجلد اسمه langs
        script.onload = () => {
            renderContent(window[langId]);
        };
        document.head.appendChild(script);
    }

    function renderContent(data) {
        // تغيير اتجاه الموقع واللغة
        document.getElementById('htmlTag').dir = data.dir;
        document.getElementById('htmlTag').lang = data.id;

        // ملء القائمة
        const nav = document.getElementById('navLinks');
        nav.innerHTML = '';
        data.nav.forEach(item => {
            const a = document.createElement('a');
            a.innerText = item.text;
            a.onclick = () => showModal(item.content);
            nav.appendChild(a);
        });

        // شريط الأخبار
        const ticker = document.getElementById('tickerTrack');
        ticker.innerHTML = data.news.map(n => `<span>• ${n}</span>`).join('');

        // العنوان والفيديو
        document.getElementById('mainTitle').innerHTML = data.heroTitle;
        document.getElementById('bookBtn').innerText = data.bookBtnText;
        document.getElementById('bookBtn').href = data.bookLink;
        document.getElementById('mainVideo').src = data.videoUrl;
    }

    function showModal(content) {
        document.getElementById('modalBody').innerHTML = content;
        document.getElementById('contentModal').style.display = 'flex';
    }

    // بناء قائمة اللغات
    const menu = document.getElementById('langMenu');
    languages.forEach(l => {
        const d = document.createElement('div');
        d.className = 'lang-item';
        d.innerHTML = `<img src="https://flagcdn.com/w40/${l.flag}.png" width="20"> ${l.name}`;
        d.onclick = () => {
            document.getElementById('currentFlag').src = `https://flagcdn.com/w80/${l.flag}.png`;
            loadLanguage(l.id);
            menu.style.display = 'none';
        };
        menu.appendChild(d);
    });

    // تحميل اللغة العربية افتراضياً عند فتح الموقع
    window.onload = () => loadLanguage('ar');
</script>
</body>
</html>
